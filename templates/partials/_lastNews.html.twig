{% block stylesheets %}
{{encore_entry_link_tags('lastNewsStyle')}}
{% endblock %}
<div class="banneer"data-aos="zoom-in" data-aos-duration="500" data-aos-anchor-placement="top-center" >
    <div class="bubble" data-aos="fade-right "data-aos-duration="700"  data-aos-delay="700">
    <div class="bubbleText">
        <h3 class="display-md stratos text-uppercase"data-aos="fade-right" data-aos-duration="700"  data-aos-delay="700">Decouvrez les dernieres actus</h3>
        <p class="text-md hero"data-aos="fade-right" data-aos-duration="700"  data-aos-delay="900">Découvrez les dernières actualités et ne manquez aucune mise à jour importante. Restez informé avec nos nouvelles les plus récentes.
        </p>
    
    </div>
    </div>
</div>
<div class="wrapper spacing-container">
    		<div class="search-bar"data-aos="zoom-in" data-aos-duration="500" data-aos-anchor-placement="top-center">
					<form class="d-flex" id="search-form">
						<div class="dropdown">
							<input class="form-control" type="text" id="search-input-news" placeholder="Chercher des actualités...">
							<i class="fa-solid fa-magnifying-glass"></i>
							<div class="dropdown-menu" id="search-results-news" style="display: none;">
								<ul class="list-unstyled p-3"></ul>
							</div>
						</div>
					</form>
			</div>
    <div class="row row_lastNews" >
    {% for new in lastNews %}
        <div class="col-md-4"data-aos="zoom-in" data-aos-duration="700" data-aos-anchor-placement="top-center" data-aos-delay="{{loop.index}}00">
        {% include "partials/_cardNews.html.twig" %}
        </div>
    {% endfor %}
    </div>
       <div class="d-flex justify-content-center"data-aos="fade-up-left" data-aos-duration="700" >
        {% include "partials/_buttonLink.html.twig" with { 'url': path('news_index'), text: 'Voir toutes les actualités' } %}
    
    </div>
</div>
{% block javascripts %}
<script>
document.addEventListener('DOMContentLoaded', () => {
    const searchInput = document.querySelector('#search-input-news');
    const searchResults = document.querySelector('#search-results-news');
    const resultsList = searchResults.querySelector('ul');

    // Réinitialiser la valeur de l'input à une chaîne vide
    searchInput.value = '';

    searchInput.addEventListener('input', function () {
        const query = this.value.trim();
        if (query.length > 1) {
            fetch(`/news/search/ajax?query=${encodeURIComponent(query)}`)
                .then((response) => response.json())
                .then((data) => {
                    resultsList.innerHTML = '';
                    if (data.length > 0) {
                        searchResults.style.display = 'block';
                        data.forEach((result) => {
                            const item = document.createElement('li');
                            const link = document.createElement('a');
                            link.href = `/news/${result.slug}`;
                            link.textContent = `${result.title} - ${result.author}`;
                            item.appendChild(link);
                            resultsList.appendChild(item);
                        });
                    } else {
                        searchResults.style.display = 'block';
                        resultsList.innerHTML = '<li>Aucun résultat</li>';
                    }
                });
        } else {
            searchResults.style.display = 'none';
        }
    });

    searchInput.addEventListener('blur', () => {
        setTimeout(() => {
            searchResults.style.display = 'none';
        }, 200);
    });
});


</script>
{% endblock %}